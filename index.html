<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#4A90D9">
  <meta name="description" content="写真から英単語を読み取って学習するPWAアプリ">
  <title>VocabSnap - 英単語学習</title>
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icons/icon-192.svg">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>

  <!-- ========== スプラッシュスクリーン ========== -->
  <div id="splash-screen">
    <div class="splash-icon">V</div>
    <div class="splash-text">読み込み中...</div>
  </div>

  <!-- ========== メインアプリ ========== -->
  <div id="app">

    <!-- ===== ホーム画面 ===== -->
    <section id="screen-home" class="screen active">
      <header class="screen-header">
        <h1>VocabSnap</h1>
        <button class="btn-icon" id="btn-theme-toggle" aria-label="テーマ切替">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
          </svg>
        </button>
      </header>
      <div class="screen-content">
        <!-- 統計 -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-number" id="stat-total">0</div>
            <div class="stat-label">登録単語数</div>
          </div>
          <div class="stat-card highlight">
            <div class="stat-number" id="stat-due">0</div>
            <div class="stat-label">今日の復習</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="stat-streak">0</div>
            <div class="stat-label">連続学習(日)</div>
          </div>
          <div class="stat-card">
            <div class="stat-number" id="stat-mastered">0</div>
            <div class="stat-label">習得済み</div>
          </div>
        </div>

        <!-- クイックアクション -->
        <div class="quick-actions">
          <button class="action-card" data-navigate="capture">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
              <circle cx="12" cy="13" r="4"/>
            </svg>
            <span>単語を撮影</span>
          </button>
          <button class="action-card" data-navigate="study">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
              <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
            </svg>
            <span>学習開始</span>
          </button>
        </div>

        <!-- 最近の単語 -->
        <div class="section">
          <div class="section-title">
            最近追加した単語
            <button class="see-all" data-navigate="wordlist">すべて見る</button>
          </div>
          <div id="recent-words">
            <div class="empty-state" id="empty-recent">
              <p>まだ単語がありません。写真を撮って追加しましょう！</p>
            </div>
          </div>
        </div>

        <!-- 苦手な単語 -->
        <div class="section" id="section-weak">
          <div class="section-title">苦手な単語</div>
          <div id="weak-words"></div>
        </div>
      </div>
    </section>

    <!-- ===== 撮影画面 ===== -->
    <section id="screen-capture" class="screen">
      <header class="screen-header">
        <h2>単語を追加</h2>
      </header>
      <div class="screen-content">
        <div class="capture-area">
          <div class="capture-preview" id="capture-preview">
            <div class="capture-placeholder">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
                <circle cx="12" cy="13" r="4"/>
              </svg>
              <p>写真を撮影または選択</p>
            </div>
          </div>

          <div class="capture-buttons">
            <button class="btn btn-primary" id="btn-camera">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
                <circle cx="12" cy="13" r="4"/>
              </svg>
              撮影
            </button>
            <button class="btn btn-outline" id="btn-gallery">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                <circle cx="8.5" cy="8.5" r="1.5"/>
                <polyline points="21,15 16,10 5,21"/>
              </svg>
              ギャラリー
            </button>
          </div>

          <!-- カメラ用 -->
          <input type="file" accept="image/*" capture="environment" class="hidden-input" id="input-camera">
          <!-- ギャラリー用 -->
          <input type="file" accept="image/*" class="hidden-input" id="input-gallery">

          <button class="btn btn-primary btn-block hidden" id="btn-ocr-start">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
              <polyline points="4,7 4,4 20,4 20,7"/><polyline points="4,17 4,20 20,20 20,17"/>
              <line x1="4" y1="12" x2="20" y2="12"/>
            </svg>
            テキストを読み取る
          </button>

          <div style="width:100%; max-width: 400px;">
            <div class="section-title mt-24">または手動で追加</div>
            <button class="btn btn-outline btn-block" data-navigate="manual-add">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
              </svg>
              手動入力
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- ===== 手動入力画面 ===== -->
    <section id="screen-manual-add" class="screen">
      <header class="screen-header">
        <button class="back-btn" data-back>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <polyline points="15,18 9,12 15,6"/>
          </svg>
          戻る
        </button>
        <h2>手動入力</h2>
        <div></div>
      </header>
      <div class="screen-content">
        <form id="form-manual-add">
          <div class="input-group">
            <label for="manual-word">英単語 *</label>
            <input type="text" class="input-field" id="manual-word" placeholder="例: abundant" required autocomplete="off" autocapitalize="none">
          </div>
          <div class="input-group">
            <label for="manual-meaning">日本語の意味 *</label>
            <input type="text" class="input-field" id="manual-meaning" placeholder="例: 豊富な、たくさんの" required>
          </div>
          <div class="input-group">
            <label for="manual-phonetic">発音記号</label>
            <input type="text" class="input-field" id="manual-phonetic" placeholder="例: əbʌ́ndənt">
          </div>
          <div class="input-group">
            <label for="manual-pos">品詞</label>
            <input type="text" class="input-field" id="manual-pos" placeholder="例: 形">
          </div>
          <div class="input-group">
            <label for="manual-example-en">例文（英語）</label>
            <textarea class="input-field" id="manual-example-en" placeholder="例: There is abundant evidence..."></textarea>
          </div>
          <div class="input-group">
            <label for="manual-example-ja">例文（日本語訳）</label>
            <textarea class="input-field" id="manual-example-ja" placeholder="例: 豊富な証拠がある..."></textarea>
          </div>
          <div class="input-group">
            <label for="manual-synonyms">類義語（カンマ区切り）</label>
            <input type="text" class="input-field" id="manual-synonyms" placeholder="例: plentiful, ample, copious">
          </div>
          <div class="input-group">
            <label for="manual-tags">タグ（カンマ区切り）</label>
            <input type="text" class="input-field" id="manual-tags" placeholder="例: Chapter1, 重要">
          </div>
          <button type="submit" class="btn btn-primary btn-block btn-lg mt-16">保存</button>
        </form>
      </div>
    </section>

    <!-- ===== OCR解析結果編集画面 ===== -->
    <section id="screen-edit-parsed" class="screen">
      <header class="screen-header">
        <button class="back-btn" data-back>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <polyline points="15,18 9,12 15,6"/>
          </svg>
          戻る
        </button>
        <h2>読み取り結果</h2>
        <button class="btn btn-sm btn-primary" id="btn-save-parsed">保存</button>
      </header>
      <div class="screen-content">
        <p class="text-secondary mb-16">読み取った内容を確認・編集してください。</p>
        <div id="parsed-words-list"></div>
        <div class="empty-state hidden" id="empty-parsed">
          <h3>単語を検出できませんでした</h3>
          <p>画像が不鮮明か、対応フォーマットではない可能性があります。</p>
          <button class="btn btn-outline" data-navigate="capture">やり直す</button>
        </div>
      </div>
    </section>

    <!-- ===== 学習モード選択画面 ===== -->
    <section id="screen-study" class="screen">
      <header class="screen-header">
        <h2>学習</h2>
      </header>
      <div class="screen-content">
        <div class="study-modes">
          <div class="study-mode-card" data-study="flashcard">
            <div class="mode-icon" style="background: var(--primary-bg); color: var(--primary);">🗂️</div>
            <div class="mode-info">
              <h3>フラッシュカード</h3>
              <p>カードをめくって意味を確認</p>
            </div>
            <span class="mode-count" id="fc-count">0</span>
          </div>

          <div class="study-mode-card" data-study="spelling">
            <div class="mode-icon" style="background: var(--success-bg); color: var(--success);">⌨️</div>
            <div class="mode-info">
              <h3>スペル入力</h3>
              <p>意味を見て英単語をタイピング</p>
            </div>
            <span class="mode-count" id="sp-count">0</span>
          </div>

          <div class="study-mode-card" data-study="matching">
            <div class="mode-icon" style="background: var(--warning-bg); color: var(--warning);">🔗</div>
            <div class="mode-info">
              <h3>マッチングゲーム</h3>
              <p>単語と意味をペアにする</p>
            </div>
            <span class="mode-count" id="mt-count">0</span>
          </div>

          <div class="study-mode-card" data-study="review">
            <div class="mode-icon" style="background: var(--danger-bg); color: var(--danger);">🔄</div>
            <div class="mode-info">
              <h3>今日の復習 (SRS)</h3>
              <p>間隔反復で効率的に記憶定着</p>
            </div>
            <span class="mode-count" id="rv-count">0</span>
          </div>
        </div>

        <!-- 学習範囲選択 -->
        <div class="section mt-24">
          <div class="section-title">学習範囲</div>
          <div class="filter-chips" id="study-filter-chips">
            <button class="chip active" data-filter="all">すべて</button>
            <button class="chip" data-filter="new">新規のみ</button>
            <button class="chip" data-filter="bookmarked">ブックマーク</button>
            <button class="chip" data-filter="weak">苦手のみ</button>
          </div>
        </div>

        <div class="empty-state hidden" id="empty-study">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
            <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
          </svg>
          <h3>単語がありません</h3>
          <p>まず単語を追加してから学習を始めましょう。</p>
          <button class="btn btn-primary" data-navigate="capture">単語を追加</button>
        </div>
      </div>
    </section>

    <!-- ===== フラッシュカード画面 ===== -->
    <section id="screen-flashcard" class="screen">
      <header class="screen-header">
        <button class="back-btn" data-back>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <polyline points="15,18 9,12 15,6"/>
          </svg>
          戻る
        </button>
        <h2>フラッシュカード</h2>
        <div></div>
      </header>
      <div class="flashcard-container">
        <div class="flashcard-progress">
          <div class="progress-bar">
            <div class="progress-bar-fill" id="fc-progress-fill" style="width: 0%"></div>
          </div>
          <div class="progress-text" id="fc-progress-text">0 / 0</div>
        </div>

        <div class="flashcard" id="flashcard">
          <div class="flashcard-inner" id="flashcard-inner">
            <div class="flashcard-front">
              <button class="fc-btn-speak" id="btn-speak" aria-label="発音">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                  <polygon points="11,5 6,9 2,9 2,15 6,15 11,19"/>
                  <path d="M19.07 4.93a10 10 0 0 1 0 14.14"/>
                  <path d="M15.54 8.46a5 5 0 0 1 0 7.07"/>
                </svg>
              </button>
              <div class="card-word" id="fc-word"></div>
              <div class="card-phonetic" id="fc-phonetic"></div>
              <div class="card-pos" id="fc-pos"></div>
              <div class="tap-hint">タップしてめくる</div>
            </div>
            <div class="flashcard-back">
              <div class="card-meaning" id="fc-meaning"></div>
              <div class="card-examples" id="fc-examples"></div>
              <div class="card-synonyms" id="fc-synonyms"></div>
            </div>
          </div>
        </div>

        <div class="flashcard-actions">
          <button class="btn btn-danger" id="btn-fc-wrong">わからない</button>
          <button class="btn btn-success" id="btn-fc-right">覚えた！</button>
        </div>
      </div>
    </section>

    <!-- ===== スペル入力画面 ===== -->
    <section id="screen-spelling" class="screen">
      <header class="screen-header">
        <button class="back-btn" data-back>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <polyline points="15,18 9,12 15,6"/>
          </svg>
          戻る
        </button>
        <h2>スペル入力</h2>
        <div></div>
      </header>
      <div class="spelling-container">
        <div class="flashcard-progress" style="width:100%; max-width:400px;">
          <div class="progress-bar">
            <div class="progress-bar-fill" id="sp-progress-fill" style="width: 0%"></div>
          </div>
          <div class="progress-text" id="sp-progress-text">0 / 0</div>
        </div>

        <div class="spelling-question">
          <div class="q-pos" id="sp-pos"></div>
          <div class="q-meaning" id="sp-meaning"></div>
          <div class="q-hint" id="sp-hint"></div>
        </div>

        <div class="spelling-input-wrapper">
          <input type="text" class="spelling-input" id="sp-input" placeholder="英単語を入力" autocomplete="off" autocapitalize="none" spellcheck="false">
          <div class="spelling-correct-answer" id="sp-correct-answer"></div>
        </div>

        <div class="spelling-actions">
          <button class="btn btn-outline" id="btn-sp-hint">ヒント</button>
          <button class="btn btn-primary" id="btn-sp-submit">確認</button>
          <button class="btn btn-outline hidden" id="btn-sp-next">次へ</button>
        </div>
      </div>
    </section>

    <!-- ===== マッチングゲーム画面 ===== -->
    <section id="screen-matching" class="screen">
      <header class="screen-header">
        <button class="back-btn" data-back>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <polyline points="15,18 9,12 15,6"/>
          </svg>
          戻る
        </button>
        <h2>マッチング</h2>
        <div></div>
      </header>
      <div class="matching-container">
        <div class="matching-info">
          <span>⏱ <span id="mt-timer">0:00</span></span>
          <span>🎯 <span id="mt-matches">0</span> / <span id="mt-total">0</span></span>
          <span>💡 <span id="mt-attempts">0</span> 回</span>
        </div>
        <div class="matching-grid" id="matching-grid"></div>
      </div>
    </section>

    <!-- ===== 学習結果画面 ===== -->
    <section id="screen-results" class="screen">
      <div class="results-container">
        <div class="results-icon" id="results-icon">🎉</div>
        <div class="results-title" id="results-title">お疲れ様！</div>
        <div class="results-subtitle" id="results-subtitle"></div>
        <div class="results-stats">
          <div class="result-stat">
            <div class="result-stat-value text-primary" id="result-total">0</div>
            <div class="result-stat-label">出題数</div>
          </div>
          <div class="result-stat">
            <div class="result-stat-value text-success" id="result-correct">0</div>
            <div class="result-stat-label">正解</div>
          </div>
          <div class="result-stat">
            <div class="result-stat-value text-danger" id="result-incorrect">0</div>
            <div class="result-stat-label">不正解</div>
          </div>
        </div>
        <button class="btn btn-primary btn-lg" data-navigate="home">ホームに戻る</button>
        <button class="btn btn-outline mt-16" id="btn-retry-study">もう一度</button>
      </div>
    </section>

    <!-- ===== 単語一覧画面 ===== -->
    <section id="screen-wordlist" class="screen">
      <header class="screen-header">
        <h2>単語帳</h2>
        <div class="header-actions">
          <button class="btn-icon" id="btn-sort-words" aria-label="並び替え">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="4" y1="6" x2="20" y2="6"/><line x1="4" y1="12" x2="16" y2="12"/><line x1="4" y1="18" x2="12" y2="18"/>
            </svg>
          </button>
        </div>
      </header>
      <div class="screen-content">
        <div class="search-bar">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/>
          </svg>
          <input type="text" id="search-input" placeholder="単語を検索..." autocomplete="off">
        </div>
        <div class="filter-chips" id="wordlist-filter-chips">
          <button class="chip active" data-wfilter="all">すべて</button>
          <button class="chip" data-wfilter="new">新規</button>
          <button class="chip" data-wfilter="learning">学習中</button>
          <button class="chip" data-wfilter="reviewing">復習中</button>
          <button class="chip" data-wfilter="mastered">習得済</button>
          <button class="chip" data-wfilter="bookmarked">⭐</button>
        </div>
        <div id="wordlist-items"></div>
        <div class="empty-state hidden" id="empty-wordlist">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14,2 14,8 20,8"/>
          </svg>
          <h3>単語がありません</h3>
          <p>写真を撮って単語を追加しましょう。</p>
          <button class="btn btn-primary" data-navigate="capture">単語を追加</button>
        </div>
      </div>
    </section>

    <!-- ===== 単語詳細画面 ===== -->
    <section id="screen-word-detail" class="screen">
      <header class="screen-header">
        <button class="back-btn" data-back>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20">
            <polyline points="15,18 9,12 15,6"/>
          </svg>
          戻る
        </button>
        <h2>単語詳細</h2>
        <div class="header-actions">
          <button class="btn-icon" id="btn-edit-word" aria-label="編集">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
              <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
            </svg>
          </button>
          <button class="btn-icon" id="btn-delete-word" aria-label="削除">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="3,6 5,6 21,6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
            </svg>
          </button>
        </div>
      </header>
      <div class="screen-content">
        <div class="word-detail-header">
          <div class="detail-word" id="detail-word"></div>
          <div class="detail-phonetic" id="detail-phonetic"></div>
          <div class="detail-pos" id="detail-pos"></div>
          <button class="btn btn-sm btn-outline mt-8" id="btn-detail-speak">🔊 発音</button>
        </div>
        <div class="detail-section">
          <h4>意味</h4>
          <div class="detail-meaning" id="detail-meaning"></div>
        </div>
        <div class="detail-section" id="detail-examples-section">
          <h4>例文</h4>
          <div class="detail-examples" id="detail-examples"></div>
        </div>
        <div class="detail-section" id="detail-synonyms-section">
          <h4>類義語</h4>
          <div class="detail-tags" id="detail-synonyms"></div>
        </div>
        <div class="detail-section">
          <h4>学習データ</h4>
          <div class="detail-srs-info" id="detail-srs"></div>
        </div>
      </div>
    </section>

    <!-- ===== 設定画面 ===== -->
    <section id="screen-settings" class="screen">
      <header class="screen-header">
        <h2>設定</h2>
      </header>
      <div class="screen-content">
        <div class="settings-group">
          <div class="settings-group-title">表示</div>
          <div class="settings-item" id="setting-darkmode">
            <span class="settings-label">ダークモード</span>
            <button class="toggle" id="toggle-darkmode"></button>
          </div>
        </div>

        <div class="settings-group">
          <div class="settings-group-title">学習</div>
          <div class="settings-item" id="setting-auto-speak">
            <span class="settings-label">自動発音</span>
            <button class="toggle" id="toggle-auto-speak"></button>
          </div>
          <div class="settings-item" id="setting-daily-goal">
            <span class="settings-label">1日の目標単語数</span>
            <span class="settings-value" id="daily-goal-value">20</span>
          </div>
        </div>

        <div class="settings-group">
          <div class="settings-group-title">データ</div>
          <div class="settings-item" id="setting-export">
            <span class="settings-label">データをエクスポート</span>
            <span class="settings-value">→</span>
          </div>
          <div class="settings-item" id="setting-import">
            <span class="settings-label">データをインポート</span>
            <span class="settings-value">→</span>
          </div>
          <input type="file" accept=".json" class="hidden-input" id="input-import">
        </div>

        <div class="settings-group">
          <div class="settings-group-title">危険ゾーン</div>
          <div class="settings-item" id="setting-clear-data" style="color: var(--danger);">
            <span class="settings-label" style="color: var(--danger);">全データ削除</span>
            <span class="settings-value">→</span>
          </div>
        </div>

        <div class="settings-group">
          <div class="settings-group-title">アプリについて</div>
          <div class="settings-item">
            <span class="settings-label">バージョン</span>
            <span class="settings-value">1.0.0</span>
          </div>
          <div class="settings-item">
            <span class="settings-label">VocabSnap</span>
            <span class="settings-value">PWA 英単語学習</span>
          </div>
        </div>
      </div>
    </section>

    <!-- ===== ボトムナビゲーション ===== -->
    <nav id="bottom-nav">
      <button class="nav-item active" data-nav="home">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
          <polyline points="9,22 9,12 15,12 15,22"/>
        </svg>
        <span>ホーム</span>
      </button>
      <button class="nav-item" data-nav="capture">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
          <circle cx="12" cy="13" r="4"/>
        </svg>
        <span>撮影</span>
      </button>
      <button class="nav-item" data-nav="study">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
          <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
        </svg>
        <span>学習</span>
        <span class="nav-badge hidden" id="nav-badge-study">0</span>
      </button>
      <button class="nav-item" data-nav="wordlist">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/>
          <line x1="3" y1="6" x2="3.01" y2="6"/><line x1="3" y1="12" x2="3.01" y2="12"/><line x1="3" y1="18" x2="3.01" y2="18"/>
        </svg>
        <span>単語帳</span>
      </button>
      <button class="nav-item" data-nav="settings">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"/>
          <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
        </svg>
        <span>設定</span>
      </button>
    </nav>
  </div>

  <!-- ===== OCR進捗オーバーレイ ===== -->
  <div class="ocr-progress hidden" id="ocr-progress">
    <div class="ocr-progress-content">
      <div class="spinner"></div>
      <div class="progress-status" id="ocr-status">準備中...</div>
      <div class="progress-percent" id="ocr-percent">0%</div>
    </div>
  </div>

  <!-- ===== モーダル ===== -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="modal-content" id="modal-content">
      <div class="modal-handle"></div>
      <div id="modal-body"></div>
    </div>
  </div>

  <!-- ===== トースト通知 ===== -->
  <div class="toast" id="toast"></div>

  <!-- ===== スクリプト ===== -->
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>
  <script src="js/db.js"></script>
  <script src="js/srs.js"></script>
  <script src="js/ocr.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
